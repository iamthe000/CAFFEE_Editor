## ☕ CAFFEE Editor

CAFFEEは、Pythonの`curses`ライブラリを使用して構築された、シンプルでカスタマイズ可能な軽量ターミナルテキストエディタです。NanoやPicoのようなクラシックなエディタの操作感を参考にしています。

基本的なテキスト編集機能に焦点を当てながら、構文ハイライト（カラーペアによる）、アンドゥ/リドゥ履歴、そして明確で最小限のUIといった重要な機能が組み込まれています。

### 🌟 主な機能

  * **ミニマルなUI:** ファイルの内容、ヘッダー、ステータスバー、そして役立つフッターメニューを表示するクリーンなインターフェースです。
  * **行番号表示:** ナビゲーションを容易にするため行番号を表示します。
  * **アンドゥ/リドゥ履歴 ($\text{Ctrl}+\text{Z}$ / $\text{Ctrl}+\text{R}$):** 堅牢なリビジョン管理のために、最新の状態を固定数保存します。
  * **マーク/選択モード ($\text{Ctrl}+\text{6}$):** テキストを選択し、カット ($\text{Ctrl}+\text{K}$) やコピー (Alt+6) の操作を可能にします。
  * **基本的なファイル操作:** ロード、保存 ($\text{Ctrl}+\text{O}$)、終了（変更が保存されていない場合の確認付き $\text{Ctrl}+\text{X}$）が可能です。
  * **ナビゲーションと編集:** 標準のカーソル移動、ページアップ/ダウン、行末 ($\text{Ctrl}+\text{E}$)、検索 ($\text{Ctrl}+\text{W}$)、ペースト ($\text{Ctrl}+\text{U}$)、行削除 ($\text{Ctrl}+\text{Y}$) をサポートしています。
  * **コメント切り替え ($\text{Ctrl}+\text{/}$):** 現在の行を簡単にコメントアウト/解除（`#`を使用）できます。
  * **簡易オートインデント:** $\text{Enter}$キーを押したときに既存のインデントを保持します。

### 🛠️ インストールとセットアップ

CAFFEEは、Pythonの組み込みライブラリである`curses`を使用する単一のPythonスクリプトであるため、インストールは簡単です。

1.  **依存関係:** Python 3がインストールされていることを確認してください。`curses`ライブラリは通常、macOSおよびLinuxシステムではデフォルトで利用可能です。（Windowsでは、多くの場合、`windows-curses`パッケージを別途インストールする必要があります: `pip install windows-curses`）。
2.  **ファイルの保存:** 提供されたコードを`caffee.py`として保存します。
3.  **実行可能にする（オプション、Linux/macOS）:**
    ```bash
    chmod +x caffee.py
    ```

### 🚀 使用方法

ターミナルからエディタを実行します。

  * **ファイルを開く場合:**
    ```bash
    ./caffee.py <ファイル名>
    ```
  * **新しいバッファで起動する場合:**
    ```bash
    ./caffee.py
    ```

### ⌨️ キーバインド (フッターメニュー)

| キー | 機能 | 説明 |
| :--- | :--- | :--- |
| $\text{Ctrl}+\text{X}$ | **終了 (Exit)** | 変更が未保存の場合、保存するかどうかを尋ねます。 |
| $\text{Ctrl}+\text{O}$ | **保存 (Save)** | バッファの内容をファイルに書き込みます。 |
| $\text{Ctrl}+\text{W}$ | **検索 (Where)** | シンプルなテキスト検索機能です。 |
| $\text{Ctrl}+\text{K}$ | **カット (Cut)** | 選択範囲、または選択がない場合は現在の行をカットします。 |
| $\text{Ctrl}+\text{U}$ | **ペースト (Paste)** | クリップボードの内容をペーストします。 |
| $\text{Ctrl}+\text{6}$ | **マーク (Mark)** | 選択モードを切り替えます（選択開始位置を設定/解除）。 |
| Alt+6 | **コピー (Copy)** | 現在マークされている選択範囲をクリップボードにコピーします。 |
| $\text{Ctrl}+\text{/}$ | **コメント (Comment)** | 現在の行の行コメント（`#`）を切り替えます。 |
| $\text{Ctrl}+\text{Y}$ | **行削除 (DelLine)** | クリップボードに入れず、現在の行全体を削除します。 |
| $\text{Ctrl}+\text{E}$ | **行末 (LineEnd)** | カーソルを現在の行の末尾に移動します。 |
| $\text{Ctrl}+\text{Z}$ | **アンドゥ (Undo)** | 履歴の前の状態に戻します。 |
| $\text{Ctrl}+\text{R}$ | **リドゥ (Redo)** | 履歴の次の状態に進めます。 |
| $\text{Enter}$ | **改行** | 新しい行を挿入し、インデントを保持します。 |
| $\text{Backspace}$ | **削除** | カーソルの前の文字を削除するか、行を結合します。 |

### ⚙️ 設定

以下のパラメータは、`caffee.py`スクリプトの冒頭で直接調整できます。

  * `EDITOR_NAME`: ヘッダーに表示される名前 (`"CAFFEE"`)。
  * `VERSION`: バージョン文字列 (`"1.0"`)。
  * `TAB_WIDTH`: $\text{Tab}$キーを押したときに表されるスペースの数（現在のスクリプトでは明示的に$\text{Tab}$キーを処理していないため、事実上未使用）。
  * `HISTORY_LIMIT`: 保存するアンドゥ/リドゥ履歴の最大数（現在 **50**）。
